# Typescript Demo for Namespace Compute API

The demo shows how to connect to the
[Compute API](https://buf.build/namespace/cloud/docs/main:namespace.cloud.compute.v1beta)
and use it to create an ephemeral Kubernetes cluster.

The API is defined using [Buf platform](https://buf.build/) and the demo uses
Typescript bindings generated by it. The underlying protocol is based on HTTP and
uses text JSON encoding, so it is feasible to access it from Node.js or browser
without the generated bindings.

## Running

The demo accesses Namespace API with the identity of the local user logged into Namespace:

```
# Install Namespace CLI tool.
curl -fsSL https://get.namespace.so/cloud/install.sh | sh

# Login with your Namespace account.
nsc login
```

Install Javascript dependencies:

```
# Add @buf package registry to access the generated bindings.
npm config set @buf:registry https://buf.build/gen/npm/v1/

# Install deps.
npm install
```

Once the set up is done run the demo:

```
npm start
```

The output will look like this:

```
Kubernetes Cluster created.
   - ID:   1k55b4ji6iqgi
   - URL:  https://cloud.namespace.so/9dcjsuhhjno46/cluster/1k55b4ji6iqgi

Waiting for the cluster to initialize...
   - cluster initialized.

Getting kubeconfig.yaml...
   - got:  1k55b4ji6iqgi.yaml

Try:
   $ kubectl --kubeconfig=1k55b4ji6iqgi.yaml get all
```
